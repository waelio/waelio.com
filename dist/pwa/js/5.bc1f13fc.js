(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"3adc":function(t,e,n){},5972:function(t,e,n){"use strict";var i=n("3adc"),s=n.n(i);s.a},a751:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todox q-mx-auto",staticStyle:{"max-width":"420px"}},[n("h1",{staticClass:"text-h4 text-center"},[t._v("Shopping Lists")]),n("q-form",{ref:"form",staticClass:"full-width q-mx-auto",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onCreate(e)}}},[n("div",{staticClass:"q-pa-sm q-mx-auto special-border"},[n("h2",{staticClass:"text-subtitle1 text-grey-6 text-center q-my-sx"},[t._v("New List")]),n("q-input",{ref:"name",attrs:{type:"text",filled:"",color:"teal",dense:"",label:"Name",clearable:"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Missing name"}]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("div",{staticClass:"row center"},[n("q-btn",{staticClass:"width-100 q-mx-auto",attrs:{type:"submit",loading:t.creating,label:"Create Shopping List",color:"primary"}})],1)],1)]),n("div",{staticClass:"q-mx-auto full-width"},[n("q-list",{staticClass:"q-mt-md rounded-borders",attrs:{bordered:""}},[n("q-item-label",{staticClass:"text-center",attrs:{header:""}},[t._v("My Lists")]),t._l(t.shsHolder,(function(e){return n("q-slide-item",{key:e.id,attrs:{"left-color":"red","right-color":"warning"},on:{left:function(n){return t.onLeft(n,e)},right:function(n){return t.onRight(n,e)}},scopedSlots:t._u([{key:"left",fn:function(){return[t._v("\n            Delete List "),n("q-icon",{attrs:{name:"delete"}})]},proxy:!0},{key:"right",fn:function(){return[t._v("\n            Edit List "),n("q-icon",{attrs:{name:"edit"}})]},proxy:!0}],null,!0)},[n("q-item",[n("q-item-section",{attrs:{top:"",avatar:""}},[n("q-avatar",{attrs:{color:"primary","text-color":"white",icon:"reorder"}})],1),n("q-item-section",[n("q-item-label",{staticClass:"text-h6"},[t._v(t._s(e.name))]),n("q-item-label",{staticClass:"ellipsis",attrs:{caption:"",alt:e.id,lines:"2"}},[t._v(t._s(e.id))])],1),n("q-item-section",{attrs:{top:"",side:""}},[n("div",{staticClass:"text-grey-8 q-gutter-xs"},[n("q-item-label",{staticClass:"text-center",attrs:{caption:""}},[t._v(t._s(t.getTimeAgo(e.createdAt).toFixed(2))+" "),n("br"),t._v("minutes ago")])],1)])],1),t.editing&&t.selected===e.id?n("q-item",{staticClass:"full-width"},[n("q-input",{ref:"newname",refInFor:!0,staticClass:"width-50",attrs:{filled:"",type:"text",label:"New list Name *","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type your List Name"}]},model:{value:t.newname,callback:function(e){t.newname=e},expression:"newname"}}),n("q-btn",{staticClass:"q-ml-sm q-px-xs",staticStyle:{"max-height":"55px",width:"75%"},attrs:{color:"orange","text-color":"white",label:"Save",glossy:"",dense:"",icon:"edit",fh:"",disabled:!t.newname,loading:t.editing&&t.activeId===e.id},on:{click:function(n){n.preventDefault(),t.activeId=e.id,t.onEdit(e)}}})],1):t._e()],1)}))],2)],1)],1)},s=[],a=(n("e6cf"),n("a030")),o=n("6b0a");const r="\n  query ListShoppingLists(\n    $filter: ModelShoppingListFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listShoppingLists(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        name\n        shoppingItems {\n          nextToken\n        }\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",l="\n  mutation CreateShoppingList(\n    $input: CreateShoppingListInput!\n    $condition: ModelShoppingListConditionInput\n  ) {\n    createShoppingList(input: $input, condition: $condition) {\n      id\n      name\n      shoppingItems {\n        items {\n          id\n          title\n          shoppingListID\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",d="\n  mutation UpdateShoppingList(\n    $input: UpdateShoppingListInput!\n    $condition: ModelShoppingListConditionInput\n  ) {\n    updateShoppingList(input: $input, condition: $condition) {\n      id\n      name\n      shoppingItems {\n        items {\n          id\n          title\n          shoppingListID\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",c="\n  mutation DeleteShoppingList(\n    $input: DeleteShoppingListInput!\n    $condition: ModelShoppingListConditionInput\n  ) {\n    deleteShoppingList(input: $input, condition: $condition) {\n      id\n      name\n      shoppingItems {\n        items {\n          id\n          title\n          shoppingListID\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n";var p=n("c64e"),h=n.n(p),u=n("bd4c"),m={name:"ShoppingList",beforeCreate(){this.$Auth.currentAuthenticatedUser().then((t=>{this.user=t,this.signedIn=!0})).catch((()=>this.$router.push({name:"auth"})))},async mounted(){this.onListAllShoppingLists()},data(){return{shsHolder:[],name:"",newname:"",user:{},selected:null,activeId:null,creating:!1,adding:!1,editing:!1,deleting:!1,owner:"foo"}},methods:{getTimeAgo(t){const e="minutes";return u["b"].getDateDiff(t,this.dateNow,e)/100},onRight({reset:t},e){console.log("right"),this.editing=!0,this.selected=e.id,t()},onLeft({reset:t},e){this.$q.dialog({title:"Confirms!",message:"Are you sure you want to delete this Shopping List?",ok:{push:!0},cancel:{push:!0,color:"negative"}}).onOk((()=>{console.log("Gonna Delete"),this.deleting=!0,this.activeId=e.id,this.deleteList(e.id),t()})).onCancel((()=>{console.log("Gonna Cancel"),this.deleting=!1,t()})).onDismiss((()=>{console.log("Gonna Dismiss"),t()}))},onCreate(){this.$refs.name.validate(),this.$refs.name.hasError?(this.formHasError=!0,this.$q.notify({color:"negative",message:"Missing form fields"})):(this.$q.notify({icon:"done",color:"positive",message:"Submitted"}),this.createShoppingList())},onEdit(t){this.$refs.newname.hasError?(this.formHasError=!0,this.$q.notify({color:"negative",message:"Missing form fields"})):(this.$q.notify({icon:"done",color:"positive",message:"Submitted"}),this.editShoppingList(t))},async onListAllShoppingLists(){return this.shsHolder=await this.getAllShoppingLists(),Promise.resolve(!0)},async getAllShoppingLists(){const t=await a["a"].graphql(Object(o["b"])(r));return t.data.listShoppingLists.items},async deleteList(t){this.deleting=!0,this.activeId=t;const e=await a["a"].graphql({query:c,variables:{input:{id:t}}});return this.deleting=!1,this.activeId=null,e&&this.onListAllShoppingLists(),Promise.resolve(!0)},async createShoppingList(){this.creating=!0;const t=this.name,e=h()(),n={id:e,name:t},i=await a["a"].graphql({query:l,variables:{input:n}});this.creating=!1,this.name=null,this.$refs.form.reset(),i&&this.onListAllShoppingLists()},async editShoppingList(t){this.activeId=t.id,this.selected=null,this.editing=!0;const e={id:t.id,name:this.newname},n=await a["a"].graphql({query:d,variables:{input:e}});this.activeId=null,this.editing=!1,this.newname=null,n&&this.onListAllShoppingLists()}},computed:{dateNow(){const t=Date.now(),e=u["b"].formatDate(t,"YYYY-MM-DD");return e}}},g=m,f=(n("5972"),n("2877")),L=n("0378"),v=n("27f9"),q=n("9c40"),x=n("1c1c"),b=n("0170"),S=n("de1d"),w=n("0016"),y=n("66e5"),I=n("4074"),$=n("cb32"),C=n("eebe"),A=n.n(C),k=Object(f["a"])(g,i,s,!1,null,"7b38113e",null);e["default"]=k.exports;A()(k,"components",{QForm:L["a"],QInput:v["a"],QBtn:q["a"],QList:x["a"],QItemLabel:b["a"],QSlideItem:S["a"],QIcon:w["a"],QItem:y["a"],QItemSection:I["a"],QAvatar:$["a"]})}}]);