(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"9e9e":function(t,e,n){},a751:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todo"},[t.$apollo.loading?n("div",[n("div",{staticClass:"text-xs-center"},[n("q-circular-progress",{staticClass:"q-ma-md",attrs:{indeterminate:"",size:"50px",color:"lime"}})],1)]):t._e(),n("form",{staticClass:"q-pa-md",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onCreate(e)}}},[n("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"420px"}},[n("q-input",{ref:"name",attrs:{type:"text",filled:"",color:"teal",dense:"",label:"Name",clearable:"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Missing name"}]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("div",{staticClass:"row center"},[n("q-btn",{staticClass:"todoButton",attrs:{type:"submit",label:"Create Todo"},scopedSlots:t._u([{key:"loading",fn:function(){return[n("q-spinner-facebook")]},proxy:!0}])})],1),n("ul",t._l(t.shoppingLists,(function(e,i){return n("li",{key:i,staticClass:"todo"},[n("p",{staticClass:"todoname"},[t._v(t._s(e.name))]),n("p",{staticClass:"text button delete",on:{click:function(n){return t.deleteList(e)}}},[t._v("Delete Shopping List")])])})),0)],1)])])},o=[],s=n("ded3"),a=n.n(s),r=n("9530"),p=n.n(r);const l="\n  query ListShoppingLists(\n    $filter: ModelShoppingListFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listShoppingLists(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        name\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",u="\n  mutation CreateShoppingList(\n    $input: CreateShoppingListInput!\n    $condition: ModelShoppingListConditionInput\n  ) {\n    createShoppingList(input: $input, condition: $condition) {\n      id\n      name\n      shoppingItems {\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",c="\n  mutation DeleteShoppingList(\n    $input: DeleteShoppingListInput!\n    $condition: ModelShoppingListConditionInput\n  ) {\n    deleteShoppingList(input: $input, condition: $condition) {\n      id\n      name\n      shoppingItems {\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n";var d=n("c64e"),m=n.n(d),h=n("bd4c"),g={name:"ShoppingList",computed:{date(){const t=Date.now(),e=h["b"].formatDate(t,"YYYY-MM-DD");return e}},data(){return{name:"",owner:"foo",shoppingLists:[]}},beforeCreate(){this.$Auth.currentAuthenticatedUser().then((t=>{this.user=t,this.signedIn=!0})).catch((()=>this.$router.push({name:"auth"})))},methods:{onCreate(){this.$refs.name.validate(),this.$refs.name.hasError?(this.formHasError=!0,this.$q.notify({color:"negative",message:"Missing form fields"})):(this.$q.notify({icon:"done",color:"positive",message:"Submitted"}),u())},deleteList(t){this.$apollo.mutate({mutation:p()(c),variables:{input:{id:t.id}},update:(t,{data:{deleteShoppingList:e}})=>{const n=t.readQuery({query:p()(l)});console.log(n),n.shoppingLists.items=n.listShoppingLists.items.filter((t=>t.id!==e.id)),t.writeQuery({query:p()(l),data:n})},optimisticResponse:{__typename:"Mutation",deleteShoppingList:a()({__typename:"ShoppingList"},l)}}).then((t=>console.log(t))).catch((t=>console.error(t)))},createShoppingList(){const t=this.name,e=m()(),n={id:e,name:t};this.$apollo.mutate({mutation:p()(u),variables:{input:n},update:(t,{data:{createShoppingList:e}})=>{const n=t.readQuery({query:p()(l)});n.listTodos.items.push(e),t.writeQuery({query:p()(l),data:n})},optimisticResponse:{__typename:"Mutation",createShoppingList:a()({__typename:"ShoppingList"},this.shoppingLists)}}).then((t=>console.log(t))).catch((t=>console.error("error!!!: ",t)))}},apollo:{lists:{query:p()(l),update:t=>t.shoppingLists.items}}},f=g,L=(n("be39"),n("2877")),S=n("58ea"),$=n("27f9"),b=n("9c40"),y=n("e669"),C=n("eebe"),v=n.n(C),x=Object(L["a"])(f,i,o,!1,null,"2da3a0fb",null);e["default"]=x.exports;v()(x,"components",{QCircularProgress:S["a"],QInput:$["a"],QBtn:b["a"],QSpinnerFacebook:y["a"]})},be39:function(t,e,n){"use strict";var i=n("9e9e"),o=n.n(i);o.a}}]);